{"ast":null,"code":"/*!\nFullCalendar Day Grid Plugin v4.3.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, memoize, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar DayGridDateProfileGenerator =\n/** @class */\nfunction (_super) {\n  __extends(DayGridDateProfileGenerator, _super);\n\n  function DayGridDateProfileGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // Computes the date range that will be rendered.\n\n\n  DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n    var dateEnv = this.dateEnv;\n\n    var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n\n    var start = renderRange.start;\n    var end = renderRange.end;\n    var endOfWeek; // year and month views should be aligned with weeks. this is already done for week\n\n    if (/^(year|month)$/.test(currentRangeUnit)) {\n      start = dateEnv.startOfWeek(start); // make end-of-week if not already\n\n      endOfWeek = dateEnv.startOfWeek(end);\n\n      if (endOfWeek.valueOf() !== end.valueOf()) {\n        end = addWeeks(endOfWeek, 1);\n      }\n    } // ensure 6 weeks\n\n\n    if (this.options.monthMode && this.options.fixedWeekCount) {\n      var rowCnt = Math.ceil( // could be partial weeks due to hiddenDays\n      diffWeeks(start, end));\n      end = addWeeks(end, 6 - rowCnt);\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  return DayGridDateProfileGenerator;\n}(DateProfileGenerator);\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\n\n\nvar Popover =\n/** @class */\nfunction () {\n  function Popover(options) {\n    var _this = this;\n\n    this.isHidden = true;\n    this.margin = 10; // the space required between the popover and the edges of the scroll container\n    // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\n    this.documentMousedown = function (ev) {\n      // only hide the popover if the click happened outside the popover\n      if (_this.el && !_this.el.contains(ev.target)) {\n        _this.hide();\n      }\n    };\n\n    this.options = options;\n  } // Shows the popover on the specified position. Renders it if not already\n\n\n  Popover.prototype.show = function () {\n    if (this.isHidden) {\n      if (!this.el) {\n        this.render();\n      }\n\n      this.el.style.display = '';\n      this.position();\n      this.isHidden = false;\n      this.trigger('show');\n    }\n  }; // Hides the popover, through CSS, but does not remove it from the DOM\n\n\n  Popover.prototype.hide = function () {\n    if (!this.isHidden) {\n      this.el.style.display = 'none';\n      this.isHidden = true;\n      this.trigger('hide');\n    }\n  }; // Creates `this.el` and renders content inside of it\n\n\n  Popover.prototype.render = function () {\n    var _this = this;\n\n    var options = this.options;\n    var el = this.el = createElement('div', {\n      className: 'fc-popover ' + (options.className || ''),\n      style: {\n        top: '0',\n        left: '0'\n      }\n    });\n\n    if (typeof options.content === 'function') {\n      options.content(el);\n    }\n\n    options.parentEl.appendChild(el); // when a click happens on anything inside with a 'fc-close' className, hide the popover\n\n    listenBySelector(el, 'click', '.fc-close', function (ev) {\n      _this.hide();\n    });\n\n    if (options.autoHide) {\n      document.addEventListener('mousedown', this.documentMousedown);\n    }\n  }; // Hides and unregisters any handlers\n\n\n  Popover.prototype.destroy = function () {\n    this.hide();\n\n    if (this.el) {\n      removeElement(this.el);\n      this.el = null;\n    }\n\n    document.removeEventListener('mousedown', this.documentMousedown);\n  }; // Positions the popover optimally, using the top/left/right options\n\n\n  Popover.prototype.position = function () {\n    var options = this.options;\n    var el = this.el;\n    var elDims = el.getBoundingClientRect(); // only used for width,height\n\n    var origin = computeRect(el.offsetParent);\n    var clippingRect = computeClippingRect(options.parentEl);\n    var top; // the \"position\" (not \"offset\") values for the popover\n\n    var left; //\n    // compute top and left\n\n    top = options.top || 0;\n\n    if (options.left !== undefined) {\n      left = options.left;\n    } else if (options.right !== undefined) {\n      left = options.right - elDims.width; // derive the left value from the right value\n    } else {\n      left = 0;\n    } // constrain to the view port. if constrained by two edges, give precedence to top/left\n\n\n    top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n    top = Math.max(top, clippingRect.top + this.margin);\n    left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n    left = Math.max(left, clippingRect.left + this.margin);\n    applyStyle(el, {\n      top: top - origin.top,\n      left: left - origin.left\n    });\n  }; // Triggers a callback. Calls a function in the option hash of the same name.\n  // Arguments beyond the first `name` are forwarded on.\n  // TODO: better code reuse for this. Repeat code\n  // can kill this???\n\n\n  Popover.prototype.trigger = function (name) {\n    if (this.options[name]) {\n      this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n  };\n\n  return Popover;\n}();\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\n\n\nvar SimpleDayGridEventRenderer =\n/** @class */\nfunction (_super) {\n  __extends(SimpleDayGridEventRenderer, _super);\n\n  function SimpleDayGridEventRenderer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // Builds the HTML to be used for the default element for an individual segment\n\n\n  SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n    var _a = this.context,\n        view = _a.view,\n        options = _a.options;\n    var eventRange = seg.eventRange;\n    var eventDef = eventRange.def;\n    var eventUi = eventRange.ui;\n    var allDay = eventDef.allDay;\n    var isDraggable = view.computeEventDraggable(eventDef, eventUi);\n    var isResizableFromStart = allDay && seg.isStart && view.computeEventStartResizable(eventDef, eventUi);\n    var isResizableFromEnd = allDay && seg.isEnd && view.computeEventEndResizable(eventDef, eventUi);\n    var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n    var skinCss = cssToStr(this.getSkinCss(eventUi));\n    var timeHtml = '';\n    var timeText;\n    var titleHtml;\n    classes.unshift('fc-day-grid-event', 'fc-h-event'); // Only display a timed events time if it is the starting segment\n\n    if (seg.isStart) {\n      timeText = this.getTimeText(eventRange);\n\n      if (timeText) {\n        timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n      }\n    }\n\n    titleHtml = '<span class=\"fc-title\">' + (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n    '</span>';\n    return '<a class=\"' + classes.join(' ') + '\"' + (eventDef.url ? ' href=\"' + htmlEscape(eventDef.url) + '\"' : '') + (skinCss ? ' style=\"' + skinCss + '\"' : '') + '>' + '<div class=\"fc-content\">' + (options.dir === 'rtl' ? titleHtml + ' ' + timeHtml : // put a natural space in between\n    timeHtml + ' ' + titleHtml //\n    ) + '</div>' + (isResizableFromStart ? '<div class=\"fc-resizer fc-start-resizer\"></div>' : '') + (isResizableFromEnd ? '<div class=\"fc-resizer fc-end-resizer\"></div>' : '') + '</a>';\n  }; // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n\n\n  SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n    return {\n      hour: 'numeric',\n      minute: '2-digit',\n      omitZeroMinute: true,\n      meridiem: 'narrow'\n    };\n  };\n\n  SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n    return false; // TODO: somehow consider the originating DayGrid's column count\n  };\n\n  return SimpleDayGridEventRenderer;\n}(FgEventRenderer);\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nvar DayGridEventRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridEventRenderer, _super);\n\n  function DayGridEventRenderer(dayGrid) {\n    var _this = _super.call(this, dayGrid.context) || this;\n\n    _this.dayGrid = dayGrid;\n    return _this;\n  } // Renders the given foreground event segments onto the grid\n\n\n  DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n    var rowStructs = this.rowStructs = this.renderSegRows(segs); // append to each row's content skeleton\n\n    this.dayGrid.rowEls.forEach(function (rowNode, i) {\n      rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n    }); // removes the \"more..\" events popover\n\n    if (!mirrorInfo) {\n      this.dayGrid.removeSegPopover();\n    }\n  }; // Unrenders all currently rendered foreground event segments\n\n\n  DayGridEventRenderer.prototype.detachSegs = function () {\n    var rowStructs = this.rowStructs || [];\n    var rowStruct;\n\n    while (rowStruct = rowStructs.pop()) {\n      removeElement(rowStruct.tbodyEl);\n    }\n\n    this.rowStructs = null;\n  }; // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n  // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n  // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n\n\n  DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n    var rowStructs = [];\n    var segRows;\n    var row;\n    segRows = this.groupSegRows(segs); // group into nested arrays\n    // iterate each row of segment groupings\n\n    for (row = 0; row < segRows.length; row++) {\n      rowStructs.push(this.renderSegRow(row, segRows[row]));\n    }\n\n    return rowStructs;\n  }; // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n  // the segments. Returns object with a bunch of internal data about how the render was calculated.\n  // NOTE: modifies rowSegs\n\n\n  DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n    var dayGrid = this.dayGrid;\n    var colCnt = dayGrid.colCnt,\n        isRtl = dayGrid.isRtl;\n    var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n\n    var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n\n    var tbody = document.createElement('tbody');\n    var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n\n    var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n\n    var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n\n    var i;\n    var levelSegs;\n    var col;\n    var tr;\n    var j;\n    var seg;\n    var td; // populates empty cells from the current column (`col`) to `endCol`\n\n    function emptyCellsUntil(endCol) {\n      while (col < endCol) {\n        // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n        td = (loneCellMatrix[i - 1] || [])[col];\n\n        if (td) {\n          td.rowSpan = (td.rowSpan || 1) + 1;\n        } else {\n          td = document.createElement('td');\n          tr.appendChild(td);\n        }\n\n        cellMatrix[i][col] = td;\n        loneCellMatrix[i][col] = td;\n        col++;\n      }\n    }\n\n    for (i = 0; i < levelCnt; i++) {\n      // iterate through all levels\n      levelSegs = segLevels[i];\n      col = 0;\n      tr = document.createElement('tr');\n      segMatrix.push([]);\n      cellMatrix.push([]);\n      loneCellMatrix.push([]); // levelCnt might be 1 even though there are no actual levels. protect against this.\n      // this single empty row is useful for styling.\n\n      if (levelSegs) {\n        for (j = 0; j < levelSegs.length; j++) {\n          // iterate through segments in level\n          seg = levelSegs[j];\n          var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n          var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n          emptyCellsUntil(leftCol); // create a container that occupies or more columns. append the event element.\n\n          td = createElement('td', {\n            className: 'fc-event-container'\n          }, seg.el);\n\n          if (leftCol !== rightCol) {\n            td.colSpan = rightCol - leftCol + 1;\n          } else {\n            // a single-column segment\n            loneCellMatrix[i][col] = td;\n          }\n\n          while (col <= rightCol) {\n            cellMatrix[i][col] = td;\n            segMatrix[i][col] = seg;\n            col++;\n          }\n\n          tr.appendChild(td);\n        }\n      }\n\n      emptyCellsUntil(colCnt); // finish off the row\n\n      var introHtml = dayGrid.renderProps.renderIntroHtml();\n\n      if (introHtml) {\n        if (dayGrid.isRtl) {\n          appendToElement(tr, introHtml);\n        } else {\n          prependToElement(tr, introHtml);\n        }\n      }\n\n      tbody.appendChild(tr);\n    }\n\n    return {\n      row: row,\n      tbodyEl: tbody,\n      cellMatrix: cellMatrix,\n      segMatrix: segMatrix,\n      segLevels: segLevels,\n      segs: rowSegs\n    };\n  }; // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n  // NOTE: modifies segs\n\n\n  DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n    var _a = this.dayGrid,\n        isRtl = _a.isRtl,\n        colCnt = _a.colCnt;\n    var levels = [];\n    var i;\n    var seg;\n    var j; // Give preference to elements with certain criteria, so they have\n    // a chance to be closer to the top.\n\n    segs = this.sortEventSegs(segs);\n\n    for (i = 0; i < segs.length; i++) {\n      seg = segs[i]; // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n\n      for (j = 0; j < levels.length; j++) {\n        if (!isDaySegCollision(seg, levels[j])) {\n          break;\n        }\n      } // `j` now holds the desired subrow index\n\n\n      seg.level = j;\n      seg.leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol; // for sorting only\n\n      seg.rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol // for sorting only\n      ;\n      (levels[j] || (levels[j] = [])).push(seg);\n    } // order segments left-to-right. very important if calendar is RTL\n\n\n    for (j = 0; j < levels.length; j++) {\n      levels[j].sort(compareDaySegCols);\n    }\n\n    return levels;\n  }; // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n\n\n  DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n    var segRows = [];\n    var i;\n\n    for (i = 0; i < this.dayGrid.rowCnt; i++) {\n      segRows.push([]);\n    }\n\n    for (i = 0; i < segs.length; i++) {\n      segRows[segs[i].row].push(segs[i]);\n    }\n\n    return segRows;\n  }; // Computes a default `displayEventEnd` value if one is not expliclty defined\n\n\n  DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n    return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n  };\n\n  return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer); // Computes whether two segments' columns collide. They are assumed to be in the same row.\n\n\nfunction isDaySegCollision(seg, otherSegs) {\n  var i;\n  var otherSeg;\n\n  for (i = 0; i < otherSegs.length; i++) {\n    otherSeg = otherSegs[i];\n\n    if (otherSeg.firstCol <= seg.lastCol && otherSeg.lastCol >= seg.firstCol) {\n      return true;\n    }\n  }\n\n  return false;\n} // A cmp function for determining the leftmost event\n\n\nfunction compareDaySegCols(a, b) {\n  return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridMirrorRenderer, _super);\n\n  function DayGridMirrorRenderer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n    var sourceSeg = mirrorInfo.sourceSeg;\n    var rowStructs = this.rowStructs = this.renderSegRows(segs); // inject each new event skeleton into each associated row\n\n    this.dayGrid.rowEls.forEach(function (rowNode, row) {\n      var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n\n      var skeletonTopEl;\n      var skeletonTop; // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n\n      if (sourceSeg && sourceSeg.row === row) {\n        skeletonTopEl = sourceSeg.el;\n      } else {\n        skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n\n        if (!skeletonTopEl) {\n          // when no events\n          skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n        }\n      }\n\n      skeletonTop = skeletonTopEl.getBoundingClientRect().top - rowNode.getBoundingClientRect().top; // the offsetParent origin\n\n      skeletonEl.style.top = skeletonTop + 'px';\n      skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n      rowNode.appendChild(skeletonEl);\n    });\n  };\n\n  return DayGridMirrorRenderer;\n}(DayGridEventRenderer);\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\n\nvar DayGridFillRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridFillRenderer, _super);\n\n  function DayGridFillRenderer(dayGrid) {\n    var _this = _super.call(this, dayGrid.context) || this;\n\n    _this.fillSegTag = 'td'; // override the default tag name\n\n    _this.dayGrid = dayGrid;\n    return _this;\n  }\n\n  DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n    // don't render timed background events\n    if (type === 'bgEvent') {\n      segs = segs.filter(function (seg) {\n        return seg.eventRange.def.allDay;\n      });\n    }\n\n    _super.prototype.renderSegs.call(this, type, segs);\n  };\n\n  DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n    var els = [];\n    var i;\n    var seg;\n    var skeletonEl;\n\n    for (i = 0; i < segs.length; i++) {\n      seg = segs[i];\n      skeletonEl = this.renderFillRow(type, seg);\n      this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n      els.push(skeletonEl);\n    }\n\n    return els;\n  }; // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n\n\n  DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n    var dayGrid = this.dayGrid;\n    var colCnt = dayGrid.colCnt,\n        isRtl = dayGrid.isRtl;\n    var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n    var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n    var startCol = leftCol;\n    var endCol = rightCol + 1;\n    var className;\n    var skeletonEl;\n    var trEl;\n\n    if (type === 'businessHours') {\n      className = 'bgevent';\n    } else {\n      className = type.toLowerCase();\n    }\n\n    skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' + '<table><tr></tr></table>' + '</div>');\n    trEl = skeletonEl.getElementsByTagName('tr')[0];\n\n    if (startCol > 0) {\n      appendToElement(trEl, // will create (startCol + 1) td's\n      new Array(startCol + 1).join(EMPTY_CELL_HTML));\n    }\n\n    seg.el.colSpan = endCol - startCol;\n    trEl.appendChild(seg.el);\n\n    if (endCol < colCnt) {\n      appendToElement(trEl, // will create (colCnt - endCol) td's\n      new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n    }\n\n    var introHtml = dayGrid.renderProps.renderIntroHtml();\n\n    if (introHtml) {\n      if (dayGrid.isRtl) {\n        appendToElement(trEl, introHtml);\n      } else {\n        prependToElement(trEl, introHtml);\n      }\n    }\n\n    return skeletonEl;\n  };\n\n  return DayGridFillRenderer;\n}(FillRenderer);\n\nvar DayTile =\n/** @class */\nfunction (_super) {\n  __extends(DayTile, _super);\n\n  function DayTile(context, el) {\n    var _this = _super.call(this, context, el) || this;\n\n    var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n    var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n    _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n    _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n    _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n    _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n    context.calendar.registerInteractiveComponent(_this, {\n      el: _this.el,\n      useEventCenter: false\n    });\n    return _this;\n  }\n\n  DayTile.prototype.render = function (props) {\n    this.renderFrame(props.date);\n    this.renderFgEvents(props.fgSegs);\n    this.renderEventSelection(props.eventSelection);\n    this.renderEventDrag(props.eventDragInstances);\n    this.renderEventResize(props.eventResizeInstances);\n  };\n\n  DayTile.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.renderFrame.unrender(); // should unrender everything else\n\n    this.calendar.unregisterInteractiveComponent(this);\n  };\n\n  DayTile.prototype._renderFrame = function (date) {\n    var _a = this,\n        theme = _a.theme,\n        dateEnv = _a.dateEnv;\n\n    var title = dateEnv.format(date, createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n    );\n    this.el.innerHTML = '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' + '<span class=\"fc-title\">' + htmlEscape(title) + '</span>' + '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' + '</div>' + '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' + '<div class=\"fc-event-container\"></div>' + '</div>';\n    this.segContainerEl = this.el.querySelector('.fc-event-container');\n  };\n\n  DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n    var date = this.props.date; // HACK\n\n    if (positionLeft < elWidth && positionTop < elHeight) {\n      return {\n        component: this,\n        dateSpan: {\n          allDay: true,\n          range: {\n            start: date,\n            end: addDays(date, 1)\n          }\n        },\n        dayEl: this.el,\n        rect: {\n          left: 0,\n          top: 0,\n          right: elWidth,\n          bottom: elHeight\n        },\n        layer: 1\n      };\n    }\n  };\n\n  return DayTile;\n}(DateComponent);\n\nvar DayTileEventRenderer =\n/** @class */\nfunction (_super) {\n  __extends(DayTileEventRenderer, _super);\n\n  function DayTileEventRenderer(dayTile) {\n    var _this = _super.call(this, dayTile.context) || this;\n\n    _this.dayTile = dayTile;\n    return _this;\n  }\n\n  DayTileEventRenderer.prototype.attachSegs = function (segs) {\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n      var seg = segs_1[_i];\n      this.dayTile.segContainerEl.appendChild(seg.el);\n    }\n  };\n\n  DayTileEventRenderer.prototype.detachSegs = function (segs) {\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n      var seg = segs_2[_i];\n      removeElement(seg.el);\n    }\n  };\n\n  return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer);\n\nvar DayBgRow =\n/** @class */\nfunction () {\n  function DayBgRow(context) {\n    this.context = context;\n  }\n\n  DayBgRow.prototype.renderHtml = function (props) {\n    var parts = [];\n\n    if (props.renderIntroHtml) {\n      parts.push(props.renderIntroHtml());\n    }\n\n    for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n      var cell = _a[_i];\n      parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n    }\n\n    if (!props.cells.length) {\n      parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n    }\n\n    if (this.context.options.dir === 'rtl') {\n      parts.reverse();\n    }\n\n    return '<tr>' + parts.join('') + '</tr>';\n  };\n\n  return DayBgRow;\n}();\n\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n  var dateEnv = context.dateEnv,\n      theme = context.theme;\n  var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n\n  var classes = getDayClasses(date, dateProfile, context);\n  classes.unshift('fc-day', theme.getClass('widgetContent'));\n  return '<td class=\"' + classes.join(' ') + '\"' + (isDateValid ? ' data-date=\"' + dateEnv.formatIso(date, {\n    omitTime: true\n  }) + '\"' : '') + (otherAttrs ? ' ' + otherAttrs : '') + '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({\n  day: 'numeric'\n});\nvar WEEK_NUM_FORMAT = createFormatter({\n  week: 'numeric'\n});\n\nvar DayGrid =\n/** @class */\nfunction (_super) {\n  __extends(DayGrid, _super);\n\n  function DayGrid(context, el, renderProps) {\n    var _this = _super.call(this, context, el) || this;\n\n    _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n\n    _this.isCellSizesDirty = false;\n    var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n    var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n    _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n    var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n    _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n    _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n    _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n    _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n    _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n    _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n    _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n    _this.renderProps = renderProps;\n    return _this;\n  }\n\n  DayGrid.prototype.render = function (props) {\n    var cells = props.cells;\n    this.rowCnt = cells.length;\n    this.colCnt = cells[0].length;\n    this.renderCells(cells, props.isRigid);\n    this.renderBusinessHours(props.businessHourSegs);\n    this.renderDateSelection(props.dateSelectionSegs);\n    this.renderBgEvents(props.bgEventSegs);\n    this.renderFgEvents(props.fgEventSegs);\n    this.renderEventSelection(props.eventSelection);\n    this.renderEventDrag(props.eventDrag);\n    this.renderEventResize(props.eventResize);\n\n    if (this.segPopoverTile) {\n      this.updateSegPopoverTile();\n    }\n  };\n\n  DayGrid.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.renderCells.unrender(); // will unrender everything else\n  };\n\n  DayGrid.prototype.getCellRange = function (row, col) {\n    var start = this.props.cells[row][col].date;\n    var end = addDays(start, 1);\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n    var ownProps = this.props;\n    this.segPopoverTile.receiveProps({\n      date: date || this.segPopoverTile.props.date,\n      fgSegs: segs || this.segPopoverTile.props.fgSegs,\n      eventSelection: ownProps.eventSelection,\n      eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n      eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n    });\n  };\n  /* Date Rendering\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype._renderCells = function (cells, isRigid) {\n    var _a = this,\n        view = _a.view,\n        dateEnv = _a.dateEnv;\n\n    var _b = this,\n        rowCnt = _b.rowCnt,\n        colCnt = _b.colCnt;\n\n    var html = '';\n    var row;\n    var col;\n\n    for (row = 0; row < rowCnt; row++) {\n      html += this.renderDayRowHtml(row, isRigid);\n    }\n\n    this.el.innerHTML = html;\n    this.rowEls = findElements(this.el, '.fc-row');\n    this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n\n    if (this.isRtl) {\n      this.cellEls.reverse();\n    }\n\n    this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n    );\n    this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n    true, false // horizontal\n    ); // trigger dayRender with each cell's element\n\n    for (row = 0; row < rowCnt; row++) {\n      for (col = 0; col < colCnt; col++) {\n        this.publiclyTrigger('dayRender', [{\n          date: dateEnv.toDate(cells[row][col].date),\n          el: this.getCellEl(row, col),\n          view: view\n        }]);\n      }\n    }\n\n    this.isCellSizesDirty = true;\n  };\n\n  DayGrid.prototype._unrenderCells = function () {\n    this.removeSegPopover();\n  }; // Generates the HTML for a single row, which is a div that wraps a table.\n  // `row` is the row number.\n\n\n  DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n    var theme = this.theme;\n    var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n\n    if (isRigid) {\n      classes.push('fc-rigid');\n    }\n\n    var bgRow = new DayBgRow(this.context);\n    return '' + '<div class=\"' + classes.join(' ') + '\">' + '<div class=\"fc-bg\">' + '<table class=\"' + theme.getClass('tableGrid') + '\">' + bgRow.renderHtml({\n      cells: this.props.cells[row],\n      dateProfile: this.props.dateProfile,\n      renderIntroHtml: this.renderProps.renderBgIntroHtml\n    }) + '</table>' + '</div>' + '<div class=\"fc-content-skeleton\">' + '<table>' + (this.getIsNumbersVisible() ? '<thead>' + this.renderNumberTrHtml(row) + '</thead>' : '') + '</table>' + '</div>' + '</div>';\n  };\n\n  DayGrid.prototype.getIsNumbersVisible = function () {\n    return this.getIsDayNumbersVisible() || this.renderProps.cellWeekNumbersVisible || this.renderProps.colWeekNumbersVisible;\n  };\n\n  DayGrid.prototype.getIsDayNumbersVisible = function () {\n    return this.rowCnt > 1;\n  };\n  /* Grid Number Rendering\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.renderNumberTrHtml = function (row) {\n    var intro = this.renderProps.renderNumberIntroHtml(row, this);\n    return '' + '<tr>' + (this.isRtl ? '' : intro) + this.renderNumberCellsHtml(row) + (this.isRtl ? intro : '') + '</tr>';\n  };\n\n  DayGrid.prototype.renderNumberCellsHtml = function (row) {\n    var htmls = [];\n    var col;\n    var date;\n\n    for (col = 0; col < this.colCnt; col++) {\n      date = this.props.cells[row][col].date;\n      htmls.push(this.renderNumberCellHtml(date));\n    }\n\n    if (this.isRtl) {\n      htmls.reverse();\n    }\n\n    return htmls.join('');\n  }; // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n  // The number row will only exist if either day numbers or week numbers are turned on.\n\n\n  DayGrid.prototype.renderNumberCellHtml = function (date) {\n    var _a = this,\n        view = _a.view,\n        dateEnv = _a.dateEnv;\n\n    var html = '';\n    var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n\n    var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n    var classes;\n    var weekCalcFirstDow;\n\n    if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n      // no numbers in day cell (week number must be along the side)\n      return '<td></td>'; //  will create an empty space above events :(\n    }\n\n    classes = getDayClasses(date, this.props.dateProfile, this.context);\n    classes.unshift('fc-day-top');\n\n    if (this.renderProps.cellWeekNumbersVisible) {\n      weekCalcFirstDow = dateEnv.weekDow;\n    }\n\n    html += '<td class=\"' + classes.join(' ') + '\"' + (isDateValid ? ' data-date=\"' + dateEnv.formatIso(date, {\n      omitTime: true\n    }) + '\"' : '') + '>';\n\n    if (this.renderProps.cellWeekNumbersVisible && date.getUTCDay() === weekCalcFirstDow) {\n      html += buildGotoAnchorHtml(view, {\n        date: date,\n        type: 'week'\n      }, {\n        'class': 'fc-week-number'\n      }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n      );\n    }\n\n    if (isDayNumberVisible) {\n      html += buildGotoAnchorHtml(view, date, {\n        'class': 'fc-day-number'\n      }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n      );\n    }\n\n    html += '</td>';\n    return html;\n  };\n  /* Sizing\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.updateSize = function (isResize) {\n    var _a = this,\n        fillRenderer = _a.fillRenderer,\n        eventRenderer = _a.eventRenderer,\n        mirrorRenderer = _a.mirrorRenderer;\n\n    if (isResize || this.isCellSizesDirty || this.view.calendar.isEventsUpdated // hack\n    ) {\n        this.buildPositionCaches();\n        this.isCellSizesDirty = false;\n      }\n\n    fillRenderer.computeSizes(isResize);\n    eventRenderer.computeSizes(isResize);\n    mirrorRenderer.computeSizes(isResize);\n    fillRenderer.assignSizes(isResize);\n    eventRenderer.assignSizes(isResize);\n    mirrorRenderer.assignSizes(isResize);\n  };\n\n  DayGrid.prototype.buildPositionCaches = function () {\n    this.buildColPositions();\n    this.buildRowPositions();\n  };\n\n  DayGrid.prototype.buildColPositions = function () {\n    this.colPositions.build();\n  };\n\n  DayGrid.prototype.buildRowPositions = function () {\n    this.rowPositions.build();\n    this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n  };\n  /* Hit System\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n    var _a = this,\n        colPositions = _a.colPositions,\n        rowPositions = _a.rowPositions;\n\n    var col = colPositions.leftToIndex(leftPosition);\n    var row = rowPositions.topToIndex(topPosition);\n\n    if (row != null && col != null) {\n      return {\n        row: row,\n        col: col,\n        dateSpan: {\n          range: this.getCellRange(row, col),\n          allDay: true\n        },\n        dayEl: this.getCellEl(row, col),\n        relativeRect: {\n          left: colPositions.lefts[col],\n          right: colPositions.rights[col],\n          top: rowPositions.tops[row],\n          bottom: rowPositions.bottoms[row]\n        }\n      };\n    }\n  };\n  /* Cell System\n  ------------------------------------------------------------------------------------------------------------------*/\n  // FYI: the first column is the leftmost column, regardless of date\n\n\n  DayGrid.prototype.getCellEl = function (row, col) {\n    return this.cellEls[row * this.colCnt + col];\n  };\n  /* Event Drag Visualization\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype._renderEventDrag = function (state) {\n    if (state) {\n      this.eventRenderer.hideByHash(state.affectedInstances);\n      this.fillRenderer.renderSegs('highlight', state.segs);\n    }\n  };\n\n  DayGrid.prototype._unrenderEventDrag = function (state) {\n    if (state) {\n      this.eventRenderer.showByHash(state.affectedInstances);\n      this.fillRenderer.unrender('highlight');\n    }\n  };\n  /* Event Resize Visualization\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype._renderEventResize = function (state) {\n    if (state) {\n      this.eventRenderer.hideByHash(state.affectedInstances);\n      this.fillRenderer.renderSegs('highlight', state.segs);\n      this.mirrorRenderer.renderSegs(state.segs, {\n        isResizing: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n\n  DayGrid.prototype._unrenderEventResize = function (state) {\n    if (state) {\n      this.eventRenderer.showByHash(state.affectedInstances);\n      this.fillRenderer.unrender('highlight');\n      this.mirrorRenderer.unrender(state.segs, {\n        isResizing: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n  /* More+ Link Popover\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGrid.prototype.removeSegPopover = function () {\n    if (this.segPopover) {\n      this.segPopover.hide(); // in handler, will call segPopover's removeElement\n    }\n  }; // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n  // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n\n\n  DayGrid.prototype.limitRows = function (levelLimit) {\n    var rowStructs = this.eventRenderer.rowStructs || [];\n    var row; // row #\n\n    var rowLevelLimit;\n\n    for (row = 0; row < rowStructs.length; row++) {\n      this.unlimitRow(row);\n\n      if (!levelLimit) {\n        rowLevelLimit = false;\n      } else if (typeof levelLimit === 'number') {\n        rowLevelLimit = levelLimit;\n      } else {\n        rowLevelLimit = this.computeRowLevelLimit(row);\n      }\n\n      if (rowLevelLimit !== false) {\n        this.limitRow(row, rowLevelLimit);\n      }\n    }\n  }; // Computes the number of levels a row will accomodate without going outside its bounds.\n  // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n  // `row` is the row number.\n\n\n  DayGrid.prototype.computeRowLevelLimit = function (row) {\n    var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n\n    var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n\n    var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n    var i;\n    var trEl; // Reveal one level <tr> at a time and stop when we find one out of bounds\n\n    for (i = 0; i < trEls.length; i++) {\n      trEl = trEls[i];\n      trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n\n      if (trEl.getBoundingClientRect().bottom > rowBottom) {\n        return i;\n      }\n    }\n\n    return false; // should not limit at all\n  }; // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n  // `row` is the row number.\n  // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n\n\n  DayGrid.prototype.limitRow = function (row, levelLimit) {\n    var _this = this;\n\n    var _a = this,\n        colCnt = _a.colCnt,\n        isRtl = _a.isRtl;\n\n    var rowStruct = this.eventRenderer.rowStructs[row];\n    var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n\n    var col = 0; // col #, left-to-right (not chronologically)\n\n    var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n\n    var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n\n    var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n\n    var i;\n    var seg;\n    var segsBelow; // array of segment objects below `seg` in the current `col`\n\n    var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n\n    var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n\n    var td;\n    var rowSpan;\n    var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n\n    var j;\n    var moreTd;\n    var moreWrap;\n    var moreLink; // Iterates through empty level cells and places \"more\" links inside if need be\n\n    var emptyCellsUntil = function (endCol) {\n      while (col < endCol) {\n        segsBelow = _this.getCellSegs(row, col, levelLimit);\n\n        if (segsBelow.length) {\n          td = cellMatrix[levelLimit - 1][col];\n          moreLink = _this.renderMoreLink(row, col, segsBelow);\n          moreWrap = createElement('div', null, moreLink);\n          td.appendChild(moreWrap);\n          moreNodes.push(moreWrap);\n        }\n\n        col++;\n      }\n    };\n\n    if (levelLimit && levelLimit < rowStruct.segLevels.length) {\n      // is it actually over the limit?\n      levelSegs = rowStruct.segLevels[levelLimit - 1];\n      cellMatrix = rowStruct.cellMatrix;\n      limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n\n      limitedNodes.forEach(function (node) {\n        node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n      }); // iterate though segments in the last allowable level\n\n      for (i = 0; i < levelSegs.length; i++) {\n        seg = levelSegs[i];\n        var leftCol = isRtl ? colCnt - 1 - seg.lastCol : seg.firstCol;\n        var rightCol = isRtl ? colCnt - 1 - seg.firstCol : seg.lastCol;\n        emptyCellsUntil(leftCol); // process empty cells before the segment\n        // determine *all* segments below `seg` that occupy the same columns\n\n        colSegsBelow = [];\n        totalSegsBelow = 0;\n\n        while (col <= rightCol) {\n          segsBelow = this.getCellSegs(row, col, levelLimit);\n          colSegsBelow.push(segsBelow);\n          totalSegsBelow += segsBelow.length;\n          col++;\n        }\n\n        if (totalSegsBelow) {\n          // do we need to replace this segment with one or many \"more\" links?\n          td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n\n          rowSpan = td.rowSpan || 1;\n          segMoreNodes = []; // make a replacement <td> for each column the segment occupies. will be one for each colspan\n\n          for (j = 0; j < colSegsBelow.length; j++) {\n            moreTd = createElement('td', {\n              className: 'fc-more-cell',\n              rowSpan: rowSpan\n            });\n            segsBelow = colSegsBelow[j];\n            moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n            );\n            moreWrap = createElement('div', null, moreLink);\n            moreTd.appendChild(moreWrap);\n            segMoreNodes.push(moreTd);\n            moreNodes.push(moreTd);\n          }\n\n          td.classList.add('fc-limited');\n          insertAfterElement(td, segMoreNodes);\n          limitedNodes.push(td);\n        }\n      }\n\n      emptyCellsUntil(this.colCnt); // finish off the level\n\n      rowStruct.moreEls = moreNodes; // for easy undoing later\n\n      rowStruct.limitedEls = limitedNodes; // for easy undoing later\n    }\n  }; // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n  // `row` is a row number.\n\n\n  DayGrid.prototype.unlimitRow = function (row) {\n    var rowStruct = this.eventRenderer.rowStructs[row];\n\n    if (rowStruct.moreEls) {\n      rowStruct.moreEls.forEach(removeElement);\n      rowStruct.moreEls = null;\n    }\n\n    if (rowStruct.limitedEls) {\n      rowStruct.limitedEls.forEach(function (limitedEl) {\n        limitedEl.classList.remove('fc-limited');\n      });\n      rowStruct.limitedEls = null;\n    }\n  }; // Renders an <a> element that represents hidden event element for a cell.\n  // Responsible for attaching click handler as well.\n\n\n  DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n    var _this = this;\n\n    var _a = this,\n        view = _a.view,\n        dateEnv = _a.dateEnv;\n\n    var a = createElement('a', {\n      className: 'fc-more'\n    });\n    a.innerText = this.getMoreLinkText(hiddenSegs.length);\n    a.addEventListener('click', function (ev) {\n      var clickOption = _this.opt('eventLimitClick');\n\n      var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n\n\n      var date = _this.props.cells[row][_col].date;\n      var moreEl = ev.currentTarget;\n\n      var dayEl = _this.getCellEl(row, col);\n\n      var allSegs = _this.getCellSegs(row, col); // rescope the segments to be within the cell's date\n\n\n      var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n\n      var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n\n      if (typeof clickOption === 'function') {\n        // the returned value can be an atomic option\n        clickOption = _this.publiclyTrigger('eventLimitClick', [{\n          date: dateEnv.toDate(date),\n          allDay: true,\n          dayEl: dayEl,\n          moreEl: moreEl,\n          segs: reslicedAllSegs,\n          hiddenSegs: reslicedHiddenSegs,\n          jsEvent: ev,\n          view: view\n        }]);\n      }\n\n      if (clickOption === 'popover') {\n        _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n      } else if (typeof clickOption === 'string') {\n        // a view name\n        view.calendar.zoomTo(date, clickOption);\n      }\n    });\n    return a;\n  }; // Reveals the popover that displays all events within a cell\n\n\n  DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n    var _this = this;\n\n    var _a = this,\n        calendar = _a.calendar,\n        view = _a.view,\n        theme = _a.theme;\n\n    var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n\n\n    var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n\n    var topEl; // the element we want to match the top coordinate of\n\n    var options;\n\n    if (this.rowCnt === 1) {\n      topEl = view.el; // will cause the popover to cover any sort of header\n    } else {\n      topEl = this.rowEls[row]; // will align with top of row\n    }\n\n    options = {\n      className: 'fc-more-popover ' + theme.getClass('popover'),\n      parentEl: view.el,\n      top: computeRect(topEl).top,\n      autoHide: true,\n      content: function (el) {\n        _this.segPopoverTile = new DayTile(_this.context, el);\n\n        _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n      },\n      hide: function () {\n        _this.segPopoverTile.destroy();\n\n        _this.segPopoverTile = null;\n\n        _this.segPopover.destroy();\n\n        _this.segPopover = null;\n      }\n    }; // Determine horizontal coordinate.\n    // We use the moreWrap instead of the <td> to avoid border confusion.\n\n    if (this.isRtl) {\n      options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n    } else {\n      options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n    }\n\n    this.segPopover = new Popover(options);\n    this.segPopover.show();\n    calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n  }; // Given the events within an array of segment objects, reslice them to be in a single day\n\n\n  DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n    var dayStart = dayDate;\n    var dayEnd = addDays(dayStart, 1);\n    var dayRange = {\n      start: dayStart,\n      end: dayEnd\n    };\n    var newSegs = [];\n\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n      var seg = segs_1[_i];\n      var eventRange = seg.eventRange;\n      var origRange = eventRange.range;\n      var slicedRange = intersectRanges(origRange, dayRange);\n\n      if (slicedRange) {\n        newSegs.push(__assign({}, seg, {\n          eventRange: {\n            def: eventRange.def,\n            ui: __assign({}, eventRange.ui, {\n              durationEditable: false\n            }),\n            instance: eventRange.instance,\n            range: slicedRange\n          },\n          isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(),\n          isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf()\n        }));\n      }\n    }\n\n    return newSegs;\n  }; // Generates the text that should be inside a \"more\" link, given the number of events it represents\n\n\n  DayGrid.prototype.getMoreLinkText = function (num) {\n    var opt = this.opt('eventLimitText');\n\n    if (typeof opt === 'function') {\n      return opt(num);\n    } else {\n      return '+' + num + ' ' + opt;\n    }\n  }; // Returns segments within a given cell.\n  // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n\n\n  DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n    var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n    var level = startLevel || 0;\n    var segs = [];\n    var seg;\n\n    while (level < segMatrix.length) {\n      seg = segMatrix[level][col];\n\n      if (seg) {\n        segs.push(seg);\n      }\n\n      level++;\n    }\n\n    return segs;\n  };\n\n  return DayGrid;\n}(DateComponent);\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({\n  week: 'numeric'\n});\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar DayGridView =\n/** @class */\nfunction (_super) {\n  __extends(DayGridView, _super);\n\n  function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n    var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n    /* Header Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Generates the HTML that will go before the day-of week header cells\n\n\n    _this.renderHeadIntroHtml = function () {\n      var theme = _this.theme;\n\n      if (_this.colWeekNumbersVisible) {\n        return '' + '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' + '<span>' + // needed for matchCellWidths\n        htmlEscape(_this.opt('weekLabel')) + '</span>' + '</th>';\n      }\n\n      return '';\n    };\n    /* Day Grid Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n\n\n    _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n      var dateEnv = _this.dateEnv;\n      var weekStart = dayGrid.props.cells[row][0].date;\n\n      if (_this.colWeekNumbersVisible) {\n        return '' + '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' + buildGotoAnchorHtml( // aside from link, important for matchCellWidths\n        _this, {\n          date: weekStart,\n          type: 'week',\n          forceOff: dayGrid.colCnt === 1\n        }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n        ) + '</td>';\n      }\n\n      return '';\n    }; // Generates the HTML that goes before the day bg cells for each day-row\n\n\n    _this.renderDayGridBgIntroHtml = function () {\n      var theme = _this.theme;\n\n      if (_this.colWeekNumbersVisible) {\n        return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n      }\n\n      return '';\n    }; // Generates the HTML that goes before every other type of row generated by DayGrid.\n    // Affects mirror-skeleton and highlight-skeleton rows.\n\n\n    _this.renderDayGridIntroHtml = function () {\n      if (_this.colWeekNumbersVisible) {\n        return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n      }\n\n      return '';\n    };\n\n    _this.el.classList.add('fc-dayGrid-view');\n\n    _this.el.innerHTML = _this.renderSkeletonHtml();\n    _this.scroller = new ScrollComponent('hidden', // overflow x\n    'auto' // overflow y\n    );\n    var dayGridContainerEl = _this.scroller.el;\n\n    _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n\n    dayGridContainerEl.classList.add('fc-day-grid-container');\n    var dayGridEl = createElement('div', {\n      className: 'fc-day-grid'\n    });\n    dayGridContainerEl.appendChild(dayGridEl);\n    var cellWeekNumbersVisible;\n\n    if (_this.opt('weekNumbers')) {\n      if (_this.opt('weekNumbersWithinDays')) {\n        cellWeekNumbersVisible = true;\n        _this.colWeekNumbersVisible = false;\n      } else {\n        cellWeekNumbersVisible = false;\n        _this.colWeekNumbersVisible = true;\n      }\n    } else {\n      _this.colWeekNumbersVisible = false;\n      cellWeekNumbersVisible = false;\n    }\n\n    _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n      renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n      renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n      renderIntroHtml: _this.renderDayGridIntroHtml,\n      colWeekNumbersVisible: _this.colWeekNumbersVisible,\n      cellWeekNumbersVisible: cellWeekNumbersVisible\n    });\n    return _this;\n  }\n\n  DayGridView.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.dayGrid.destroy();\n    this.scroller.destroy();\n  }; // Builds the HTML skeleton for the view.\n  // The day-grid component will render inside of a container defined by this HTML.\n\n\n  DayGridView.prototype.renderSkeletonHtml = function () {\n    var theme = this.theme;\n    return '' + '<table class=\"' + theme.getClass('tableGrid') + '\">' + (this.opt('columnHeader') ? '<thead class=\"fc-head\">' + '<tr>' + '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' + '</tr>' + '</thead>' : '') + '<tbody class=\"fc-body\">' + '<tr>' + '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' + '</tr>' + '</tbody>' + '</table>';\n  }; // Generates an HTML attribute string for setting the width of the week number column, if it is known\n\n\n  DayGridView.prototype.weekNumberStyleAttr = function () {\n    if (this.weekNumberWidth != null) {\n      return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n    }\n\n    return '';\n  }; // Determines whether each row should have a constant height\n\n\n  DayGridView.prototype.hasRigidRows = function () {\n    var eventLimit = this.opt('eventLimit');\n    return eventLimit && typeof eventLimit !== 'number';\n  };\n  /* Dimensions\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n    _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n\n\n    this.dayGrid.updateSize(isResize);\n  }; // Refreshes the horizontal dimensions of the view\n\n\n  DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n    var dayGrid = this.dayGrid;\n    var eventLimit = this.opt('eventLimit');\n    var headRowEl = this.header ? this.header.el : null; // HACK\n\n    var scrollerHeight;\n    var scrollbarWidths; // hack to give the view some height prior to dayGrid's columns being rendered\n    // TODO: separate setting height from scroller VS dayGrid.\n\n    if (!dayGrid.rowEls) {\n      if (!isAuto) {\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.scroller.setHeight(scrollerHeight);\n      }\n\n      return;\n    }\n\n    if (this.colWeekNumbersVisible) {\n      // Make sure all week number cells running down the side have the same width.\n      this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n    } // reset all heights to be natural\n\n\n    this.scroller.clear();\n\n    if (headRowEl) {\n      uncompensateScroll(headRowEl);\n    }\n\n    dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n    // is the event limit a constant level number?\n\n    if (eventLimit && typeof eventLimit === 'number') {\n      dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n    } // distribute the height to the rows\n    // (viewHeight is a \"recommended\" value if isAuto)\n\n\n    scrollerHeight = this.computeScrollerHeight(viewHeight);\n    this.setGridHeight(scrollerHeight, isAuto); // is the event limit dynamically calculated?\n\n    if (eventLimit && typeof eventLimit !== 'number') {\n      dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n    }\n\n    if (!isAuto) {\n      // should we force dimensions of the scroll container?\n      this.scroller.setHeight(scrollerHeight);\n      scrollbarWidths = this.scroller.getScrollbarWidths();\n\n      if (scrollbarWidths.left || scrollbarWidths.right) {\n        // using scrollbars?\n        if (headRowEl) {\n          compensateScroll(headRowEl, scrollbarWidths);\n        } // doing the scrollbar compensation might have created text overflow which created more height. redo\n\n\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.scroller.setHeight(scrollerHeight);\n      } // guarantees the same scrollbar widths\n\n\n      this.scroller.lockOverflow(scrollbarWidths);\n    }\n  }; // given a desired total height of the view, returns what the height of the scroller should be\n\n\n  DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n    return viewHeight - subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n  }; // Sets the height of just the DayGrid component in this view\n\n\n  DayGridView.prototype.setGridHeight = function (height, isAuto) {\n    if (this.opt('monthMode')) {\n      // if auto, make the height of each row the height that it would be if there were 6 weeks\n      if (isAuto) {\n        height *= this.dayGrid.rowCnt / 6;\n      }\n\n      distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n    } else {\n      if (isAuto) {\n        undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n      } else {\n        distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n      }\n    }\n  };\n  /* Scroll\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  DayGridView.prototype.computeDateScroll = function (duration) {\n    return {\n      top: 0\n    };\n  };\n\n  DayGridView.prototype.queryDateScroll = function () {\n    return {\n      top: this.scroller.getScrollTop()\n    };\n  };\n\n  DayGridView.prototype.applyDateScroll = function (scroll) {\n    if (scroll.top !== undefined) {\n      this.scroller.setScrollTop(scroll.top);\n    }\n  };\n\n  return DayGridView;\n}(View);\n\nDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid =\n/** @class */\nfunction (_super) {\n  __extends(SimpleDayGrid, _super);\n\n  function SimpleDayGrid(context, dayGrid) {\n    var _this = _super.call(this, context, dayGrid.el) || this;\n\n    _this.slicer = new DayGridSlicer();\n    _this.dayGrid = dayGrid;\n    context.calendar.registerInteractiveComponent(_this, {\n      el: _this.dayGrid.el\n    });\n    return _this;\n  }\n\n  SimpleDayGrid.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    this.calendar.unregisterInteractiveComponent(this);\n  };\n\n  SimpleDayGrid.prototype.render = function (props) {\n    var dayGrid = this.dayGrid;\n    var dateProfile = props.dateProfile,\n        dayTable = props.dayTable;\n    dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), {\n      dateProfile: dateProfile,\n      cells: dayTable.cells,\n      isRigid: props.isRigid\n    }));\n  };\n\n  SimpleDayGrid.prototype.buildPositionCaches = function () {\n    this.dayGrid.buildPositionCaches();\n  };\n\n  SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n    var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n\n    if (rawHit) {\n      return {\n        component: this.dayGrid,\n        dateSpan: rawHit.dateSpan,\n        dayEl: rawHit.dayEl,\n        rect: {\n          left: rawHit.relativeRect.left,\n          right: rawHit.relativeRect.right,\n          top: rawHit.relativeRect.top,\n          bottom: rawHit.relativeRect.bottom\n        },\n        layer: 0\n      };\n    }\n  };\n\n  return SimpleDayGrid;\n}(DateComponent);\n\nvar DayGridSlicer =\n/** @class */\nfunction (_super) {\n  __extends(DayGridSlicer, _super);\n\n  function DayGridSlicer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n    return dayTable.sliceRange(dateRange);\n  };\n\n  return DayGridSlicer;\n}(Slicer);\n\nvar DayGridView$1 =\n/** @class */\nfunction (_super) {\n  __extends(DayGridView, _super);\n\n  function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n    var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n\n    _this.buildDayTable = memoize(buildDayTable);\n\n    if (_this.opt('columnHeader')) {\n      _this.header = new DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n    }\n\n    _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n    return _this;\n  }\n\n  DayGridView.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    if (this.header) {\n      this.header.destroy();\n    }\n\n    this.simpleDayGrid.destroy();\n  };\n\n  DayGridView.prototype.render = function (props) {\n    _super.prototype.render.call(this, props);\n\n    var dateProfile = this.props.dateProfile;\n    var dayTable = this.dayTable = this.buildDayTable(dateProfile, this.dateProfileGenerator);\n\n    if (this.header) {\n      this.header.receiveProps({\n        dateProfile: dateProfile,\n        dates: dayTable.headerDates,\n        datesRepDistinctDays: dayTable.rowCnt === 1,\n        renderIntroHtml: this.renderHeadIntroHtml\n      });\n    }\n\n    this.simpleDayGrid.receiveProps({\n      dateProfile: dateProfile,\n      dayTable: dayTable,\n      businessHours: props.businessHours,\n      dateSelection: props.dateSelection,\n      eventStore: props.eventStore,\n      eventUiBases: props.eventUiBases,\n      eventSelection: props.eventSelection,\n      eventDrag: props.eventDrag,\n      eventResize: props.eventResize,\n      isRigid: this.hasRigidRows(),\n      nextDayThreshold: this.nextDayThreshold\n    });\n  };\n\n  return DayGridView;\n}(DayGridView);\n\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n  var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n  return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n  defaultView: 'dayGridMonth',\n  views: {\n    dayGrid: DayGridView$1,\n    dayGridDay: {\n      type: 'dayGrid',\n      duration: {\n        days: 1\n      }\n    },\n    dayGridWeek: {\n      type: 'dayGrid',\n      duration: {\n        weeks: 1\n      }\n    },\n    dayGridMonth: {\n      type: 'dayGrid',\n      duration: {\n        months: 1\n      },\n      monthMode: true,\n      fixedWeekCount: true\n    }\n  }\n});\nexport default main;\nexport { DayGridView as AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView$1 as DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };","map":{"version":3,"sources":["/Users/Verdone/Desktop/Final-Homeworks/05 - Day Planner/day-planner-react/node_modules/@fullcalendar/daygrid/main.esm.js"],"names":["addWeeks","diffWeeks","DateProfileGenerator","createElement","listenBySelector","removeElement","computeRect","computeClippingRect","applyStyle","cssToStr","htmlEscape","FgEventRenderer","appendToElement","prependToElement","htmlToElement","FillRenderer","memoizeRendering","createFormatter","addDays","DateComponent","rangeContainsMarker","getDayClasses","findElements","PositionCache","buildGotoAnchorHtml","findChildren","insertAfterElement","intersectRanges","ScrollComponent","matchCellWidths","uncompensateScroll","compensateScroll","subtractInnerElHeight","distributeHeight","undistributeHeight","View","Slicer","memoize","DayHeader","DaySeries","DayTable","createPlugin","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","DayGridDateProfileGenerator","_super","buildRenderRange","currentRange","currentRangeUnit","isRangeAllDay","dateEnv","renderRange","start","end","endOfWeek","test","startOfWeek","valueOf","options","monthMode","fixedWeekCount","rowCnt","Math","ceil","Popover","_this","isHidden","margin","documentMousedown","ev","el","contains","target","hide","show","render","style","display","position","trigger","className","top","left","content","parentEl","appendChild","autoHide","document","addEventListener","destroy","removeEventListener","elDims","getBoundingClientRect","origin","offsetParent","clippingRect","undefined","right","width","min","bottom","height","max","name","slice","SimpleDayGridEventRenderer","renderSegHtml","seg","mirrorInfo","_a","context","view","eventRange","eventDef","def","eventUi","ui","allDay","isDraggable","computeEventDraggable","isResizableFromStart","isStart","computeEventStartResizable","isResizableFromEnd","isEnd","computeEventEndResizable","classes","getSegClasses","skinCss","getSkinCss","timeHtml","timeText","titleHtml","unshift","getTimeText","title","join","url","dir","computeEventTimeFormat","hour","minute","omitZeroMinute","meridiem","computeDisplayEventEnd","DayGridEventRenderer","dayGrid","attachSegs","segs","rowStructs","renderSegRows","rowEls","forEach","rowNode","querySelector","tbodyEl","removeSegPopover","detachSegs","rowStruct","pop","segRows","row","groupSegRows","push","renderSegRow","rowSegs","colCnt","isRtl","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","levelSegs","col","tr","j","td","emptyCellsUntil","endCol","rowSpan","leftCol","lastCol","firstCol","rightCol","colSpan","introHtml","renderProps","renderIntroHtml","levels","sortEventSegs","isDaySegCollision","level","sort","compareDaySegCols","otherSegs","otherSeg","a","DayGridMirrorRenderer","sourceSeg","skeletonEl","skeletonTopEl","skeletonTop","EMPTY_CELL_HTML","DayGridFillRenderer","fillSegTag","renderSegs","type","filter","els","renderFillRow","startCol","trEl","toLowerCase","getElementsByTagName","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","_renderFrame","renderFgEvents","bind","unrender","renderEventSelection","selectByInstanceId","unselectByInstanceId","renderEventDrag","hideByHash","showByHash","renderEventResize","calendar","registerInteractiveComponent","useEventCenter","props","date","fgSegs","eventSelection","eventDragInstances","eventResizeInstances","unregisterInteractiveComponent","theme","format","opt","innerHTML","getClass","getIconClass","segContainerEl","queryHit","positionLeft","positionTop","elWidth","elHeight","component","dateSpan","range","dayEl","rect","layer","dayTile","_i","segs_1","segs_2","DayBgRow","renderHtml","parts","cells","cell","renderCellHtml","dateProfile","htmlAttrs","reverse","otherAttrs","isDateValid","activeRange","formatIso","omitTime","DAY_NUM_FORMAT","day","WEEK_NUM_FORMAT","week","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBusinessHours","renderDateSelection","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","businessHourSegs","dateSelectionSegs","bgEventSegs","fgEventSegs","eventDrag","eventResize","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","receiveProps","affectedInstances","_b","html","renderDayRowHtml","cellEls","rowPositions","colPositions","publiclyTrigger","toDate","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","isDayNumberVisible","weekCalcFirstDow","weekDow","getUTCDay","updateSize","isResize","isEventsUpdated","buildPositionCaches","computeSizes","assignSizes","buildColPositions","buildRowPositions","build","bottoms","positionToHit","leftPosition","topPosition","leftToIndex","topToIndex","relativeRect","lefts","rights","tops","state","isResizing","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowEl","rowBottom","trEls","classList","remove","moreNodes","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","getCellSegs","renderMoreLink","node","add","concat","moreEls","limitedEls","limitedEl","hiddenSegs","innerText","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","jsEvent","showSegPopover","zoomTo","parentNode","topEl","releaseAfterSizingTriggers","dayDate","dayStart","dayEnd","dayRange","newSegs","origRange","slicedRange","durationEditable","instance","num","startLevel","WEEK_NUM_FORMAT$1","DayGridView","viewSpec","dateProfileGenerator","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","forceOff","renderDayGridBgIntroHtml","renderDayGridIntroHtml","renderSkeletonHtml","scroller","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","eventLimit","viewHeight","isAuto","updateBaseSize","headRowEl","header","scrollerHeight","scrollbarWidths","computeScrollerHeight","setHeight","clear","setGridHeight","getScrollbarWidths","lockOverflow","computeDateScroll","duration","queryDateScroll","getScrollTop","applyDateScroll","scroll","setScrollTop","dateProfileGeneratorClass","SimpleDayGrid","slicer","DayGridSlicer","dayTable","sliceProps","nextDayThreshold","rawHit","sliceRange","dateRange","DayGridView$1","_context","buildDayTable","simpleDayGrid","dates","headerDates","datesRepDistinctDays","businessHours","dateSelection","eventStore","eventUiBases","daySeries","main","defaultView","views","dayGridDay","days","dayGridWeek","weeks","dayGridMonth","months","AbstractDayGridView","buildBasicDayTable"],"mappings":"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","sourcesContent":["/*!\nFullCalendar Day Grid Plugin v4.3.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, memoize, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DayGridDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(DayGridDateProfileGenerator, _super);\n    function DayGridDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.options.monthMode &&\n            this.options.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return DayGridDateProfileGenerator;\n}(DateProfileGenerator));\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\nvar Popover = /** @class */ (function () {\n    function Popover(options) {\n        var _this = this;\n        this.isHidden = true;\n        this.margin = 10; // the space required between the popover and the edges of the scroll container\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        this.documentMousedown = function (ev) {\n            // only hide the popover if the click happened outside the popover\n            if (_this.el && !_this.el.contains(ev.target)) {\n                _this.hide();\n            }\n        };\n        this.options = options;\n    }\n    // Shows the popover on the specified position. Renders it if not already\n    Popover.prototype.show = function () {\n        if (this.isHidden) {\n            if (!this.el) {\n                this.render();\n            }\n            this.el.style.display = '';\n            this.position();\n            this.isHidden = false;\n            this.trigger('show');\n        }\n    };\n    // Hides the popover, through CSS, but does not remove it from the DOM\n    Popover.prototype.hide = function () {\n        if (!this.isHidden) {\n            this.el.style.display = 'none';\n            this.isHidden = true;\n            this.trigger('hide');\n        }\n    };\n    // Creates `this.el` and renders content inside of it\n    Popover.prototype.render = function () {\n        var _this = this;\n        var options = this.options;\n        var el = this.el = createElement('div', {\n            className: 'fc-popover ' + (options.className || ''),\n            style: {\n                top: '0',\n                left: '0'\n            }\n        });\n        if (typeof options.content === 'function') {\n            options.content(el);\n        }\n        options.parentEl.appendChild(el);\n        // when a click happens on anything inside with a 'fc-close' className, hide the popover\n        listenBySelector(el, 'click', '.fc-close', function (ev) {\n            _this.hide();\n        });\n        if (options.autoHide) {\n            document.addEventListener('mousedown', this.documentMousedown);\n        }\n    };\n    // Hides and unregisters any handlers\n    Popover.prototype.destroy = function () {\n        this.hide();\n        if (this.el) {\n            removeElement(this.el);\n            this.el = null;\n        }\n        document.removeEventListener('mousedown', this.documentMousedown);\n    };\n    // Positions the popover optimally, using the top/left/right options\n    Popover.prototype.position = function () {\n        var options = this.options;\n        var el = this.el;\n        var elDims = el.getBoundingClientRect(); // only used for width,height\n        var origin = computeRect(el.offsetParent);\n        var clippingRect = computeClippingRect(options.parentEl);\n        var top; // the \"position\" (not \"offset\") values for the popover\n        var left; //\n        // compute top and left\n        top = options.top || 0;\n        if (options.left !== undefined) {\n            left = options.left;\n        }\n        else if (options.right !== undefined) {\n            left = options.right - elDims.width; // derive the left value from the right value\n        }\n        else {\n            left = 0;\n        }\n        // constrain to the view port. if constrained by two edges, give precedence to top/left\n        top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n        top = Math.max(top, clippingRect.top + this.margin);\n        left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n        left = Math.max(left, clippingRect.left + this.margin);\n        applyStyle(el, {\n            top: top - origin.top,\n            left: left - origin.left\n        });\n    };\n    // Triggers a callback. Calls a function in the option hash of the same name.\n    // Arguments beyond the first `name` are forwarded on.\n    // TODO: better code reuse for this. Repeat code\n    // can kill this???\n    Popover.prototype.trigger = function (name) {\n        if (this.options[name]) {\n            this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n        }\n    };\n    return Popover;\n}());\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\nvar SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(SimpleDayGridEventRenderer, _super);\n    function SimpleDayGridEventRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Builds the HTML to be used for the default element for an individual segment\n    SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var _a = this.context, view = _a.view, options = _a.options;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = view.computeEventDraggable(eventDef, eventUi);\n        var isResizableFromStart = allDay && seg.isStart && view.computeEventStartResizable(eventDef, eventUi);\n        var isResizableFromEnd = allDay && seg.isEnd && view.computeEventEndResizable(eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeHtml = '';\n        var timeText;\n        var titleHtml;\n        classes.unshift('fc-day-grid-event', 'fc-h-event');\n        // Only display a timed events time if it is the starting segment\n        if (seg.isStart) {\n            timeText = this.getTimeText(eventRange);\n            if (timeText) {\n                timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n            }\n        }\n        titleHtml =\n            '<span class=\"fc-title\">' +\n                (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                '</span>';\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (options.dir === 'rtl' ?\n                titleHtml + ' ' + timeHtml : // put a natural space in between\n                timeHtml + ' ' + titleHtml //\n            ) +\n            '</div>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false; // TODO: somehow consider the originating DayGrid's column count\n    };\n    return SimpleDayGridEventRenderer;\n}(FgEventRenderer));\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\nvar DayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(DayGridEventRenderer, _super);\n    function DayGridEventRenderer(dayGrid) {\n        var _this = _super.call(this, dayGrid.context) || this;\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    // Renders the given foreground event segments onto the grid\n    DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // append to each row's content skeleton\n        this.dayGrid.rowEls.forEach(function (rowNode, i) {\n            rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n        });\n        // removes the \"more..\" events popover\n        if (!mirrorInfo) {\n            this.dayGrid.removeSegPopover();\n        }\n    };\n    // Unrenders all currently rendered foreground event segments\n    DayGridEventRenderer.prototype.detachSegs = function () {\n        var rowStructs = this.rowStructs || [];\n        var rowStruct;\n        while ((rowStruct = rowStructs.pop())) {\n            removeElement(rowStruct.tbodyEl);\n        }\n        this.rowStructs = null;\n    };\n    // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n    // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n    // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n    DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n        var rowStructs = [];\n        var segRows;\n        var row;\n        segRows = this.groupSegRows(segs); // group into nested arrays\n        // iterate each row of segment groupings\n        for (row = 0; row < segRows.length; row++) {\n            rowStructs.push(this.renderSegRow(row, segRows[row]));\n        }\n        return rowStructs;\n    };\n    // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n    // the segments. Returns object with a bunch of internal data about how the render was calculated.\n    // NOTE: modifies rowSegs\n    DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n        var dayGrid = this.dayGrid;\n        var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n        var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n        var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n        var tbody = document.createElement('tbody');\n        var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n        var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n        var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n        var i;\n        var levelSegs;\n        var col;\n        var tr;\n        var j;\n        var seg;\n        var td;\n        // populates empty cells from the current column (`col`) to `endCol`\n        function emptyCellsUntil(endCol) {\n            while (col < endCol) {\n                // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                td = (loneCellMatrix[i - 1] || [])[col];\n                if (td) {\n                    td.rowSpan = (td.rowSpan || 1) + 1;\n                }\n                else {\n                    td = document.createElement('td');\n                    tr.appendChild(td);\n                }\n                cellMatrix[i][col] = td;\n                loneCellMatrix[i][col] = td;\n                col++;\n            }\n        }\n        for (i = 0; i < levelCnt; i++) { // iterate through all levels\n            levelSegs = segLevels[i];\n            col = 0;\n            tr = document.createElement('tr');\n            segMatrix.push([]);\n            cellMatrix.push([]);\n            loneCellMatrix.push([]);\n            // levelCnt might be 1 even though there are no actual levels. protect against this.\n            // this single empty row is useful for styling.\n            if (levelSegs) {\n                for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                    seg = levelSegs[j];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol);\n                    // create a container that occupies or more columns. append the event element.\n                    td = createElement('td', { className: 'fc-event-container' }, seg.el);\n                    if (leftCol !== rightCol) {\n                        td.colSpan = rightCol - leftCol + 1;\n                    }\n                    else { // a single-column segment\n                        loneCellMatrix[i][col] = td;\n                    }\n                    while (col <= rightCol) {\n                        cellMatrix[i][col] = td;\n                        segMatrix[i][col] = seg;\n                        col++;\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            emptyCellsUntil(colCnt); // finish off the row\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (dayGrid.isRtl) {\n                    appendToElement(tr, introHtml);\n                }\n                else {\n                    prependToElement(tr, introHtml);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        return {\n            row: row,\n            tbodyEl: tbody,\n            cellMatrix: cellMatrix,\n            segMatrix: segMatrix,\n            segLevels: segLevels,\n            segs: rowSegs\n        };\n    };\n    // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n    // NOTE: modifies segs\n    DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n        var _a = this.dayGrid, isRtl = _a.isRtl, colCnt = _a.colCnt;\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        // Give preference to elements with certain criteria, so they have\n        // a chance to be closer to the top.\n        segs = this.sortEventSegs(segs);\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n            for (j = 0; j < levels.length; j++) {\n                if (!isDaySegCollision(seg, levels[j])) {\n                    break;\n                }\n            }\n            // `j` now holds the desired subrow index\n            seg.level = j;\n            seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n            seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n            ;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        // order segments left-to-right. very important if calendar is RTL\n        for (j = 0; j < levels.length; j++) {\n            levels[j].sort(compareDaySegCols);\n        }\n        return levels;\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n    DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n        var segRows = [];\n        var i;\n        for (i = 0; i < this.dayGrid.rowCnt; i++) {\n            segRows.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segRows[segs[i].row].push(segs[i]);\n        }\n        return segRows;\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n    };\n    return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer));\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n    var i;\n    var otherSeg;\n    for (i = 0; i < otherSegs.length; i++) {\n        otherSeg = otherSegs[i];\n        if (otherSeg.firstCol <= seg.lastCol &&\n            otherSeg.lastCol >= seg.firstCol) {\n            return true;\n        }\n    }\n    return false;\n}\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n    return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(DayGridMirrorRenderer, _super);\n    function DayGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var sourceSeg = mirrorInfo.sourceSeg;\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // inject each new event skeleton into each associated row\n        this.dayGrid.rowEls.forEach(function (rowNode, row) {\n            var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n            var skeletonTopEl;\n            var skeletonTop;\n            // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n            if (sourceSeg && sourceSeg.row === row) {\n                skeletonTopEl = sourceSeg.el;\n            }\n            else {\n                skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                if (!skeletonTopEl) { // when no events\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                }\n            }\n            skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                rowNode.getBoundingClientRect().top; // the offsetParent origin\n            skeletonEl.style.top = skeletonTop + 'px';\n            skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n            rowNode.appendChild(skeletonEl);\n        });\n    };\n    return DayGridMirrorRenderer;\n}(DayGridEventRenderer));\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\nvar DayGridFillRenderer = /** @class */ (function (_super) {\n    __extends(DayGridFillRenderer, _super);\n    function DayGridFillRenderer(dayGrid) {\n        var _this = _super.call(this, dayGrid.context) || this;\n        _this.fillSegTag = 'td'; // override the default tag name\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n        // don't render timed background events\n        if (type === 'bgEvent') {\n            segs = segs.filter(function (seg) {\n                return seg.eventRange.def.allDay;\n            });\n        }\n        _super.prototype.renderSegs.call(this, type, segs);\n    };\n    DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var els = [];\n        var i;\n        var seg;\n        var skeletonEl;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            skeletonEl = this.renderFillRow(type, seg);\n            this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n            els.push(skeletonEl);\n        }\n        return els;\n    };\n    // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n    DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n        var dayGrid = this.dayGrid;\n        var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n        var startCol = leftCol;\n        var endCol = rightCol + 1;\n        var className;\n        var skeletonEl;\n        var trEl;\n        if (type === 'businessHours') {\n            className = 'bgevent';\n        }\n        else {\n            className = type.toLowerCase();\n        }\n        skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n            '<table><tr></tr></table>' +\n            '</div>');\n        trEl = skeletonEl.getElementsByTagName('tr')[0];\n        if (startCol > 0) {\n            appendToElement(trEl, \n            // will create (startCol + 1) td's\n            new Array(startCol + 1).join(EMPTY_CELL_HTML));\n        }\n        seg.el.colSpan = endCol - startCol;\n        trEl.appendChild(seg.el);\n        if (endCol < colCnt) {\n            appendToElement(trEl, \n            // will create (colCnt - endCol) td's\n            new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n        }\n        var introHtml = dayGrid.renderProps.renderIntroHtml();\n        if (introHtml) {\n            if (dayGrid.isRtl) {\n                appendToElement(trEl, introHtml);\n            }\n            else {\n                prependToElement(trEl, introHtml);\n            }\n        }\n        return skeletonEl;\n    };\n    return DayGridFillRenderer;\n}(FillRenderer));\n\nvar DayTile = /** @class */ (function (_super) {\n    __extends(DayTile, _super);\n    function DayTile(context, el) {\n        var _this = _super.call(this, context, el) || this;\n        var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n        var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        context.calendar.registerInteractiveComponent(_this, {\n            el: _this.el,\n            useEventCenter: false\n        });\n        return _this;\n    }\n    DayTile.prototype.render = function (props) {\n        this.renderFrame(props.date);\n        this.renderFgEvents(props.fgSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDragInstances);\n        this.renderEventResize(props.eventResizeInstances);\n    };\n    DayTile.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderFrame.unrender(); // should unrender everything else\n        this.calendar.unregisterInteractiveComponent(this);\n    };\n    DayTile.prototype._renderFrame = function (date) {\n        var _a = this, theme = _a.theme, dateEnv = _a.dateEnv;\n        var title = dateEnv.format(date, createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n        );\n        this.el.innerHTML =\n            '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                '<span class=\"fc-title\">' +\n                htmlEscape(title) +\n                '</span>' +\n                '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                '</div>' +\n                '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                '<div class=\"fc-event-container\"></div>' +\n                '</div>';\n        this.segContainerEl = this.el.querySelector('.fc-event-container');\n    };\n    DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var date = this.props.date; // HACK\n        if (positionLeft < elWidth && positionTop < elHeight) {\n            return {\n                component: this,\n                dateSpan: {\n                    allDay: true,\n                    range: { start: date, end: addDays(date, 1) }\n                },\n                dayEl: this.el,\n                rect: {\n                    left: 0,\n                    top: 0,\n                    right: elWidth,\n                    bottom: elHeight\n                },\n                layer: 1\n            };\n        }\n    };\n    return DayTile;\n}(DateComponent));\nvar DayTileEventRenderer = /** @class */ (function (_super) {\n    __extends(DayTileEventRenderer, _super);\n    function DayTileEventRenderer(dayTile) {\n        var _this = _super.call(this, dayTile.context) || this;\n        _this.dayTile = dayTile;\n        return _this;\n    }\n    DayTileEventRenderer.prototype.attachSegs = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            this.dayTile.segContainerEl.appendChild(seg.el);\n        }\n    };\n    DayTileEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer));\n\nvar DayBgRow = /** @class */ (function () {\n    function DayBgRow(context) {\n        this.context = context;\n    }\n    DayBgRow.prototype.renderHtml = function (props) {\n        var parts = [];\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n        }\n        if (!props.cells.length) {\n            parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n        }\n        if (this.context.options.dir === 'rtl') {\n            parts.reverse();\n        }\n        return '<tr>' + parts.join('') + '</tr>';\n    };\n    return DayBgRow;\n}());\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n    var classes = getDayClasses(date, dateProfile, context);\n    classes.unshift('fc-day', theme.getClass('widgetContent'));\n    return '<td class=\"' + classes.join(' ') + '\"' +\n        (isDateValid ?\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({ day: 'numeric' });\nvar WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' });\nvar DayGrid = /** @class */ (function (_super) {\n    __extends(DayGrid, _super);\n    function DayGrid(context, el, renderProps) {\n        var _this = _super.call(this, context, el) || this;\n        _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n        _this.isCellSizesDirty = false;\n        var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n        _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n        var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n        _this.renderProps = renderProps;\n        return _this;\n    }\n    DayGrid.prototype.render = function (props) {\n        var cells = props.cells;\n        this.rowCnt = cells.length;\n        this.colCnt = cells[0].length;\n        this.renderCells(cells, props.isRigid);\n        this.renderBusinessHours(props.businessHourSegs);\n        this.renderDateSelection(props.dateSelectionSegs);\n        this.renderBgEvents(props.bgEventSegs);\n        this.renderFgEvents(props.fgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n        if (this.segPopoverTile) {\n            this.updateSegPopoverTile();\n        }\n    };\n    DayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderCells.unrender(); // will unrender everything else\n    };\n    DayGrid.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n        var ownProps = this.props;\n        this.segPopoverTile.receiveProps({\n            date: date || this.segPopoverTile.props.date,\n            fgSegs: segs || this.segPopoverTile.props.fgSegs,\n            eventSelection: ownProps.eventSelection,\n            eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n            eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n        });\n    };\n    /* Date Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderCells = function (cells, isRigid) {\n        var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n        var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n        var html = '';\n        var row;\n        var col;\n        for (row = 0; row < rowCnt; row++) {\n            html += this.renderDayRowHtml(row, isRigid);\n        }\n        this.el.innerHTML = html;\n        this.rowEls = findElements(this.el, '.fc-row');\n        this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        if (this.isRtl) {\n            this.cellEls.reverse();\n        }\n        this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n        );\n        this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n        true, false // horizontal\n        );\n        // trigger dayRender with each cell's element\n        for (row = 0; row < rowCnt; row++) {\n            for (col = 0; col < colCnt; col++) {\n                this.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[row][col].date),\n                        el: this.getCellEl(row, col),\n                        view: view\n                    }\n                ]);\n            }\n        }\n        this.isCellSizesDirty = true;\n    };\n    DayGrid.prototype._unrenderCells = function () {\n        this.removeSegPopover();\n    };\n    // Generates the HTML for a single row, which is a div that wraps a table.\n    // `row` is the row number.\n    DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n        var theme = this.theme;\n        var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n        if (isRigid) {\n            classes.push('fc-rigid');\n        }\n        var bgRow = new DayBgRow(this.context);\n        return '' +\n            '<div class=\"' + classes.join(' ') + '\">' +\n            '<div class=\"fc-bg\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            bgRow.renderHtml({\n                cells: this.props.cells[row],\n                dateProfile: this.props.dateProfile,\n                renderIntroHtml: this.renderProps.renderBgIntroHtml\n            }) +\n            '</table>' +\n            '</div>' +\n            '<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            (this.getIsNumbersVisible() ?\n                '<thead>' +\n                    this.renderNumberTrHtml(row) +\n                    '</thead>' :\n                '') +\n            '</table>' +\n            '</div>' +\n            '</div>';\n    };\n    DayGrid.prototype.getIsNumbersVisible = function () {\n        return this.getIsDayNumbersVisible() ||\n            this.renderProps.cellWeekNumbersVisible ||\n            this.renderProps.colWeekNumbersVisible;\n    };\n    DayGrid.prototype.getIsDayNumbersVisible = function () {\n        return this.rowCnt > 1;\n    };\n    /* Grid Number Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.renderNumberTrHtml = function (row) {\n        var intro = this.renderProps.renderNumberIntroHtml(row, this);\n        return '' +\n            '<tr>' +\n            (this.isRtl ? '' : intro) +\n            this.renderNumberCellsHtml(row) +\n            (this.isRtl ? intro : '') +\n            '</tr>';\n    };\n    DayGrid.prototype.renderNumberCellsHtml = function (row) {\n        var htmls = [];\n        var col;\n        var date;\n        for (col = 0; col < this.colCnt; col++) {\n            date = this.props.cells[row][col].date;\n            htmls.push(this.renderNumberCellHtml(date));\n        }\n        if (this.isRtl) {\n            htmls.reverse();\n        }\n        return htmls.join('');\n    };\n    // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n    // The number row will only exist if either day numbers or week numbers are turned on.\n    DayGrid.prototype.renderNumberCellHtml = function (date) {\n        var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n        var html = '';\n        var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n        var classes;\n        var weekCalcFirstDow;\n        if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n            // no numbers in day cell (week number must be along the side)\n            return '<td></td>'; //  will create an empty space above events :(\n        }\n        classes = getDayClasses(date, this.props.dateProfile, this.context);\n        classes.unshift('fc-day-top');\n        if (this.renderProps.cellWeekNumbersVisible) {\n            weekCalcFirstDow = dateEnv.weekDow;\n        }\n        html += '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            '>';\n        if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n            html += buildGotoAnchorHtml(view, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n            );\n        }\n        if (isDayNumberVisible) {\n            html += buildGotoAnchorHtml(view, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n            );\n        }\n        html += '</td>';\n        return html;\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.updateSize = function (isResize) {\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize ||\n            this.isCellSizesDirty ||\n            this.view.calendar.isEventsUpdated // hack\n        ) {\n            this.buildPositionCaches();\n            this.isCellSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    DayGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildRowPositions();\n    };\n    DayGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    DayGrid.prototype.buildRowPositions = function () {\n        this.rowPositions.build();\n        this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(leftPosition);\n        var row = rowPositions.topToIndex(topPosition);\n        if (row != null && col != null) {\n            return {\n                row: row,\n                col: col,\n                dateSpan: {\n                    range: this.getCellRange(row, col),\n                    allDay: true\n                },\n                dayEl: this.getCellEl(row, col),\n                relativeRect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row]\n                }\n            };\n        }\n    };\n    /* Cell System\n    ------------------------------------------------------------------------------------------------------------------*/\n    // FYI: the first column is the leftmost column, regardless of date\n    DayGrid.prototype.getCellEl = function (row, col) {\n        return this.cellEls[row * this.colCnt + col];\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', state.segs);\n        }\n    };\n    DayGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight');\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', state.segs);\n            this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    DayGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight');\n            this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* More+ Link Popover\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.removeSegPopover = function () {\n        if (this.segPopover) {\n            this.segPopover.hide(); // in handler, will call segPopover's removeElement\n        }\n    };\n    // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n    // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n    DayGrid.prototype.limitRows = function (levelLimit) {\n        var rowStructs = this.eventRenderer.rowStructs || [];\n        var row; // row #\n        var rowLevelLimit;\n        for (row = 0; row < rowStructs.length; row++) {\n            this.unlimitRow(row);\n            if (!levelLimit) {\n                rowLevelLimit = false;\n            }\n            else if (typeof levelLimit === 'number') {\n                rowLevelLimit = levelLimit;\n            }\n            else {\n                rowLevelLimit = this.computeRowLevelLimit(row);\n            }\n            if (rowLevelLimit !== false) {\n                this.limitRow(row, rowLevelLimit);\n            }\n        }\n    };\n    // Computes the number of levels a row will accomodate without going outside its bounds.\n    // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n    // `row` is the row number.\n    DayGrid.prototype.computeRowLevelLimit = function (row) {\n        var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n        var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n        var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n        var i;\n        var trEl;\n        // Reveal one level <tr> at a time and stop when we find one out of bounds\n        for (i = 0; i < trEls.length; i++) {\n            trEl = trEls[i];\n            trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n            if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                return i;\n            }\n        }\n        return false; // should not limit at all\n    };\n    // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n    // `row` is the row number.\n    // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n    DayGrid.prototype.limitRow = function (row, levelLimit) {\n        var _this = this;\n        var _a = this, colCnt = _a.colCnt, isRtl = _a.isRtl;\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n        var col = 0; // col #, left-to-right (not chronologically)\n        var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n        var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n        var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n        var i;\n        var seg;\n        var segsBelow; // array of segment objects below `seg` in the current `col`\n        var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n        var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n        var td;\n        var rowSpan;\n        var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n        var j;\n        var moreTd;\n        var moreWrap;\n        var moreLink;\n        // Iterates through empty level cells and places \"more\" links inside if need be\n        var emptyCellsUntil = function (endCol) {\n            while (col < endCol) {\n                segsBelow = _this.getCellSegs(row, col, levelLimit);\n                if (segsBelow.length) {\n                    td = cellMatrix[levelLimit - 1][col];\n                    moreLink = _this.renderMoreLink(row, col, segsBelow);\n                    moreWrap = createElement('div', null, moreLink);\n                    td.appendChild(moreWrap);\n                    moreNodes.push(moreWrap);\n                }\n                col++;\n            }\n        };\n        if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n            levelSegs = rowStruct.segLevels[levelLimit - 1];\n            cellMatrix = rowStruct.cellMatrix;\n            limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n            limitedNodes.forEach(function (node) {\n                node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n            });\n            // iterate though segments in the last allowable level\n            for (i = 0; i < levelSegs.length; i++) {\n                seg = levelSegs[i];\n                var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                emptyCellsUntil(leftCol); // process empty cells before the segment\n                // determine *all* segments below `seg` that occupy the same columns\n                colSegsBelow = [];\n                totalSegsBelow = 0;\n                while (col <= rightCol) {\n                    segsBelow = this.getCellSegs(row, col, levelLimit);\n                    colSegsBelow.push(segsBelow);\n                    totalSegsBelow += segsBelow.length;\n                    col++;\n                }\n                if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                    td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                    rowSpan = td.rowSpan || 1;\n                    segMoreNodes = [];\n                    // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                    for (j = 0; j < colSegsBelow.length; j++) {\n                        moreTd = createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                        segsBelow = colSegsBelow[j];\n                        moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                        );\n                        moreWrap = createElement('div', null, moreLink);\n                        moreTd.appendChild(moreWrap);\n                        segMoreNodes.push(moreTd);\n                        moreNodes.push(moreTd);\n                    }\n                    td.classList.add('fc-limited');\n                    insertAfterElement(td, segMoreNodes);\n                    limitedNodes.push(td);\n                }\n            }\n            emptyCellsUntil(this.colCnt); // finish off the level\n            rowStruct.moreEls = moreNodes; // for easy undoing later\n            rowStruct.limitedEls = limitedNodes; // for easy undoing later\n        }\n    };\n    // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n    // `row` is a row number.\n    DayGrid.prototype.unlimitRow = function (row) {\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        if (rowStruct.moreEls) {\n            rowStruct.moreEls.forEach(removeElement);\n            rowStruct.moreEls = null;\n        }\n        if (rowStruct.limitedEls) {\n            rowStruct.limitedEls.forEach(function (limitedEl) {\n                limitedEl.classList.remove('fc-limited');\n            });\n            rowStruct.limitedEls = null;\n        }\n    };\n    // Renders an <a> element that represents hidden event element for a cell.\n    // Responsible for attaching click handler as well.\n    DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n        var _this = this;\n        var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n        var a = createElement('a', { className: 'fc-more' });\n        a.innerText = this.getMoreLinkText(hiddenSegs.length);\n        a.addEventListener('click', function (ev) {\n            var clickOption = _this.opt('eventLimitClick');\n            var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var date = _this.props.cells[row][_col].date;\n            var moreEl = ev.currentTarget;\n            var dayEl = _this.getCellEl(row, col);\n            var allSegs = _this.getCellSegs(row, col);\n            // rescope the segments to be within the cell's date\n            var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n            var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n            if (typeof clickOption === 'function') {\n                // the returned value can be an atomic option\n                clickOption = _this.publiclyTrigger('eventLimitClick', [\n                    {\n                        date: dateEnv.toDate(date),\n                        allDay: true,\n                        dayEl: dayEl,\n                        moreEl: moreEl,\n                        segs: reslicedAllSegs,\n                        hiddenSegs: reslicedHiddenSegs,\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n            }\n            if (clickOption === 'popover') {\n                _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n            }\n            else if (typeof clickOption === 'string') { // a view name\n                view.calendar.zoomTo(date, clickOption);\n            }\n        });\n        return a;\n    };\n    // Reveals the popover that displays all events within a cell\n    DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n        var _this = this;\n        var _a = this, calendar = _a.calendar, view = _a.view, theme = _a.theme;\n        var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n        var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n        var topEl; // the element we want to match the top coordinate of\n        var options;\n        if (this.rowCnt === 1) {\n            topEl = view.el; // will cause the popover to cover any sort of header\n        }\n        else {\n            topEl = this.rowEls[row]; // will align with top of row\n        }\n        options = {\n            className: 'fc-more-popover ' + theme.getClass('popover'),\n            parentEl: view.el,\n            top: computeRect(topEl).top,\n            autoHide: true,\n            content: function (el) {\n                _this.segPopoverTile = new DayTile(_this.context, el);\n                _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n            },\n            hide: function () {\n                _this.segPopoverTile.destroy();\n                _this.segPopoverTile = null;\n                _this.segPopover.destroy();\n                _this.segPopover = null;\n            }\n        };\n        // Determine horizontal coordinate.\n        // We use the moreWrap instead of the <td> to avoid border confusion.\n        if (this.isRtl) {\n            options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n        }\n        else {\n            options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n        }\n        this.segPopover = new Popover(options);\n        this.segPopover.show();\n        calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n    };\n    // Given the events within an array of segment objects, reslice them to be in a single day\n    DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n        var dayStart = dayDate;\n        var dayEnd = addDays(dayStart, 1);\n        var dayRange = { start: dayStart, end: dayEnd };\n        var newSegs = [];\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            var eventRange = seg.eventRange;\n            var origRange = eventRange.range;\n            var slicedRange = intersectRanges(origRange, dayRange);\n            if (slicedRange) {\n                newSegs.push(__assign({}, seg, { eventRange: {\n                        def: eventRange.def,\n                        ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                        instance: eventRange.instance,\n                        range: slicedRange\n                    }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n            }\n        }\n        return newSegs;\n    };\n    // Generates the text that should be inside a \"more\" link, given the number of events it represents\n    DayGrid.prototype.getMoreLinkText = function (num) {\n        var opt = this.opt('eventLimitText');\n        if (typeof opt === 'function') {\n            return opt(num);\n        }\n        else {\n            return '+' + num + ' ' + opt;\n        }\n    };\n    // Returns segments within a given cell.\n    // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n    DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n        var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n        var level = startLevel || 0;\n        var segs = [];\n        var seg;\n        while (level < segMatrix.length) {\n            seg = segMatrix[level][col];\n            if (seg) {\n                segs.push(seg);\n            }\n            level++;\n        }\n        return segs;\n    };\n    return DayGrid;\n}(DateComponent));\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({ week: 'numeric' });\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar DayGridView = /** @class */ (function (_super) {\n    __extends(DayGridView, _super);\n    function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n        var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n        /* Header Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var theme = _this.theme;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    htmlEscape(_this.opt('weekLabel')) +\n                    '</span>' +\n                    '</th>';\n            }\n            return '';\n        };\n        /* Day Grid Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n        _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n            var dateEnv = _this.dateEnv;\n            var weekStart = dayGrid.props.cells[row][0].date;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    _this, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                    ) +\n                    '</td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before the day bg cells for each day-row\n        _this.renderDayGridBgIntroHtml = function () {\n            var theme = _this.theme;\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before every other type of row generated by DayGrid.\n        // Affects mirror-skeleton and highlight-skeleton rows.\n        _this.renderDayGridIntroHtml = function () {\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        _this.el.classList.add('fc-dayGrid-view');\n        _this.el.innerHTML = _this.renderSkeletonHtml();\n        _this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var dayGridContainerEl = _this.scroller.el;\n        _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n        dayGridContainerEl.classList.add('fc-day-grid-container');\n        var dayGridEl = createElement('div', { className: 'fc-day-grid' });\n        dayGridContainerEl.appendChild(dayGridEl);\n        var cellWeekNumbersVisible;\n        if (_this.opt('weekNumbers')) {\n            if (_this.opt('weekNumbersWithinDays')) {\n                cellWeekNumbersVisible = true;\n                _this.colWeekNumbersVisible = false;\n            }\n            else {\n                cellWeekNumbersVisible = false;\n                _this.colWeekNumbersVisible = true;\n            }\n        }\n        else {\n            _this.colWeekNumbersVisible = false;\n            cellWeekNumbersVisible = false;\n        }\n        _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n            renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n            renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n            renderIntroHtml: _this.renderDayGridIntroHtml,\n            colWeekNumbersVisible: _this.colWeekNumbersVisible,\n            cellWeekNumbersVisible: cellWeekNumbersVisible\n        });\n        return _this;\n    }\n    DayGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.dayGrid.destroy();\n        this.scroller.destroy();\n    };\n    // Builds the HTML skeleton for the view.\n    // The day-grid component will render inside of a container defined by this HTML.\n    DayGridView.prototype.renderSkeletonHtml = function () {\n        var theme = this.theme;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (this.opt('columnHeader') ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    // Generates an HTML attribute string for setting the width of the week number column, if it is known\n    DayGridView.prototype.weekNumberStyleAttr = function () {\n        if (this.weekNumberWidth != null) {\n            return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n        }\n        return '';\n    };\n    // Determines whether each row should have a constant height\n    DayGridView.prototype.hasRigidRows = function () {\n        var eventLimit = this.opt('eventLimit');\n        return eventLimit && typeof eventLimit !== 'number';\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.dayGrid.updateSize(isResize);\n    };\n    // Refreshes the horizontal dimensions of the view\n    DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var dayGrid = this.dayGrid;\n        var eventLimit = this.opt('eventLimit');\n        var headRowEl = this.header ? this.header.el : null; // HACK\n        var scrollerHeight;\n        var scrollbarWidths;\n        // hack to give the view some height prior to dayGrid's columns being rendered\n        // TODO: separate setting height from scroller VS dayGrid.\n        if (!dayGrid.rowEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        if (this.colWeekNumbersVisible) {\n            // Make sure all week number cells running down the side have the same width.\n            this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n        }\n        // reset all heights to be natural\n        this.scroller.clear();\n        if (headRowEl) {\n            uncompensateScroll(headRowEl);\n        }\n        dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n        // is the event limit a constant level number?\n        if (eventLimit && typeof eventLimit === 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n        }\n        // distribute the height to the rows\n        // (viewHeight is a \"recommended\" value if isAuto)\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.setGridHeight(scrollerHeight, isAuto);\n        // is the event limit dynamically calculated?\n        if (eventLimit && typeof eventLimit !== 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                if (headRowEl) {\n                    compensateScroll(headRowEl, scrollbarWidths);\n                }\n                // doing the scrollbar compensation might have created text overflow which created more height. redo\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    // Sets the height of just the DayGrid component in this view\n    DayGridView.prototype.setGridHeight = function (height, isAuto) {\n        if (this.opt('monthMode')) {\n            // if auto, make the height of each row the height that it would be if there were 6 weeks\n            if (isAuto) {\n                height *= this.dayGrid.rowCnt / 6;\n            }\n            distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n        }\n        else {\n            if (isAuto) {\n                undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n            }\n            else {\n                distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n            }\n        }\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGridView.prototype.computeDateScroll = function (duration) {\n        return { top: 0 };\n    };\n    DayGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    DayGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    return DayGridView;\n}(View));\nDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid = /** @class */ (function (_super) {\n    __extends(SimpleDayGrid, _super);\n    function SimpleDayGrid(context, dayGrid) {\n        var _this = _super.call(this, context, dayGrid.el) || this;\n        _this.slicer = new DayGridSlicer();\n        _this.dayGrid = dayGrid;\n        context.calendar.registerInteractiveComponent(_this, { el: _this.dayGrid.el });\n        return _this;\n    }\n    SimpleDayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleDayGrid.prototype.render = function (props) {\n        var dayGrid = this.dayGrid;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }));\n    };\n    SimpleDayGrid.prototype.buildPositionCaches = function () {\n        this.dayGrid.buildPositionCaches();\n    };\n    SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.dayGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleDayGrid;\n}(DateComponent));\nvar DayGridSlicer = /** @class */ (function (_super) {\n    __extends(DayGridSlicer, _super);\n    function DayGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n        return dayTable.sliceRange(dateRange);\n    };\n    return DayGridSlicer;\n}(Slicer));\n\nvar DayGridView$1 = /** @class */ (function (_super) {\n    __extends(DayGridView, _super);\n    function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n        var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        if (_this.opt('columnHeader')) {\n            _this.header = new DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n        }\n        _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n        return _this;\n    }\n    DayGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleDayGrid.destroy();\n    };\n    DayGridView.prototype.render = function (props) {\n        _super.prototype.render.call(this, props);\n        var dateProfile = this.props.dateProfile;\n        var dayTable = this.dayTable =\n            this.buildDayTable(dateProfile, this.dateProfileGenerator);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: dayTable.rowCnt === 1,\n                renderIntroHtml: this.renderHeadIntroHtml\n            });\n        }\n        this.simpleDayGrid.receiveProps({\n            dateProfile: dateProfile,\n            dayTable: dayTable,\n            businessHours: props.businessHours,\n            dateSelection: props.dateSelection,\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isRigid: this.hasRigidRows(),\n            nextDayThreshold: this.nextDayThreshold\n        });\n    };\n    return DayGridView;\n}(DayGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n    defaultView: 'dayGridMonth',\n    views: {\n        dayGrid: DayGridView$1,\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 }\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 }\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true\n        }\n    }\n});\n\nexport default main;\nexport { DayGridView as AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView$1 as DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };\n"]},"metadata":{},"sourceType":"module"}